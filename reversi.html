<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>リバーシ</title>
</head>
<body>
    <canvas id="canvas" width="260" height="260"></canvas>
    <script type="text/javascript" >
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d")
        //canvas要素のgetContextメソッドでContextを指定し、ctxに代入。
    //function drawBoard(){
        ctx.fillStyle = "green"
        ctx.fillRect(0,0,canvas.width,canvas.height)
        //変数ctxのメソッドを利用して、四角を描画する。
        var board =[
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,2,1,0,0,0],
            [0,0,0,1,2,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]

        //配列にdiv classつけれたらラクだよな。。。
        drawBoard()
        function drawBoard(){
        ctx.fillStyle="green"
        ctx.fillRect=(0,0,canvas.width,canvas.height)
        ctx.strokeStyle = "black"
        for(var i=0; i<=8; i++)
        {
            ctx.beginPath()
            //線を描く事を宣言します。
            ctx.moveTo(i*30+10,10)
            ctx.lineTo(i*30+10,250)
            ctx.moveTo(10,i*30+10)
            ctx.lineTo(250,i*30+10)
            ctx.stroke()
            }
            for(var y=0;y<=7;y++){
                for(var x = 0;x<=7;x++){
                    drawStone(x,y,board[y][x])
                }
            }
        }
        function drawStone(x,y,c){
            if(c == 1){
            ctx.fillStyle = "black"
            }else if(c == 2){
                ctx.fillStyle="white"
            }else{
                return
            }
            ctx.beginPath()
            ctx.arc(x*30+25,y*30+25,14,0,2*Math.PI)
            ctx.fill()
        }
        //3でぬける
        function turn(x,y){
            if(0<=x && x<=7 && 0 <= y && y <=7 ){
            board[y][x]++ //色が変わる
            if(board[y][x]==3){
                board[y][x]=0
            }
            }
        }
        //クリックして再描画
        canvas.onmousedown=function(e){
            var r = canvas.getBoundingClientRect()
            var x = Math.floor((e.clientX - r.left-10)/30)
            var y = Math.floor((e.clientY - r.top-10)/30)
            turn(x,y)
            drawBoard() //押してアクションを起こしたうえで、再描写
            console.log(x,y);
        }

        if(board[y][x]==1 && board[y-1][x-1]){

        }
        //JQUERY EQ 0-63のEQ





    </script>
</body>
</html>